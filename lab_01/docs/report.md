# Гузев Вячеслав, ИУ7-32Б. Типы и структуры данных. Отчёт по лабораторной работе *"«Длинная» арифметика"*.

## Условие задачи

*Смоделировать операцию деления действительного числа
на действительное число в форме (+/-)m.n Е (+/-)K, где
суммарная длина мантиссы (m+n) - до 30 значащих цифр, а
величина порядка K - до 5 цифр. Результат выдать в форме
(+/-)0.m1 Е (+/-)K1, где m1 - до 30 значащих цифр, а K1 - до
5 цифр.*

## Техническое задание

### Исходные данные

Первое и второе число - действительные, заданные в форме
(+/-)m.n Е (+/-)K, где суммарная длина мантиссы (m+n) -
до 30 значащих цифр, а величина порядка K - до 5 цифр.

Примеры правильного ввода: 1; 1e1; -1e1; +1e1; 1e-1; 1e+1;
0.1; 0.1e1
и различные комбинации вышеперечисленных примеров

Ошибочным считается ввод любого вида, который не совпадает с
указанным форматом.

В ходе решения задачи оба этих числа приводятся к
нормированному
виду (+/-)0.m Е (+/-)K

### Результат

В результате деления одного действительного числа на другое
получается число действительного типа. Результат
выводится в нормированном виде (+/-)0.m Е (+/-)K, где
m - до 30 значащих цифр, а K - до 5 цифр. Точность
результата:
30 значащих цифр.

### Аварийные ситуации

1) Ввод буквы вместо цифр
2) Ввод нуля как делителя
3) Отклонение от заданного в описании формата ввода
4) Переполнение мантиссы при вводе
5) Переполнение степени при вводе
6) Переполнение степени результата

На каждую из вышеперечисленных ошибок выводится
соответствующее предупреждение в stdin. Коды возврата не
предусмотрены.

## Структура данных

В реализации программы используется запись вида

    struct bigfloat
    {
        int num[31];
        int exp;
    };

где num - мантисса хранящегося числа, exp - степень
нормированного вида.
Эта структура применяется для хранения двух введённых чисел
и результата.

## Описание алгоритма

На вход программы подаются два действительных числа, после
чего они нормализуются.

### Алгоритм нормализации

1) Подсчёт цифр в числе до точки.
2) Вычисление степени числа для нормализованного вида
3) Сдвиг цифр в мантиссе для приведения к нормализованному
виду

После нормализации цифр они делятся и результат выводится на
экран.

### Алгоритм деления

1) Для мантиссы каждого числа выполняется следующее (число А
делимое,число B - делитель): B вычитается из A N раз,
после чего N записывается в i-ю позицию (i - номер итерации
сдвига) мантиссы результата, а A сдвигается до прежнего
нормализованного вида и итерация инварианта повторяется.
2) Мантисса результата округляется.
3) По результатам сдвига и округления вычисляется степень
результата.

При переполнении или нуль-результате выводится
соответствующее сообщение.

## Набор тестов

### Тепличные тесты

|№   |1 число      |2 число           |Результат                        |Пояснение                      |
|----|-------------|------------------|---------------------------------|-------------------------------|
|1.1 |1            |1                 |+0.1Е1                          |проверка работы с единицами    |
|1.2 |0.5          |1                 |+0.5E0                           |проверка деления на единину    |
|1.3 |2            |2                 |+0.1E-1                          |пр. работы на одинаковых числах|
|1.4 |-1111        |0.1111            |-0.1E+5                          |пр.р.нормализации              |
|1.5 |0.001e0      |-1.E-3            |-0.1E0                           |пр.р.с результатом в 0 степени |
|1.6 |22 e-5       |2.2e+6            |+0.1E-13                         |пр.р. с ненулевой степенью     |
|1.7 |0001e-2      |.000004e+4        |+0.25E-6                         |пр.р.с незначащими нулями      |
|1.8 |0011111100e-2|1.11111e+5        |+0.1E-4                          |пр.р. с знач. и незнач. 0      |
|1.9 |+45          |4                 |+0.15666666666666666666666666667 |пр.р. точность деления         |
|1.10|.1e-99999    |.1E-99999         |+0.1E0                           |пр.р. с большими степенями     |
|1.11|9            |0.333333333 (9шт.)|+0.2999999997E+1(7 на 10-м месте)|точность                       |

### Граничные тесты

|№  |1 число                                     |2 число                                          |Результат  |Пояснение                          |
|---|--------------------------------------------|-------------------------------------------------|-----------|-----------------------------------|
|2.1|999999999999999999999999999999.e0(30шт.)    |-999999999999999999999999999999.e0(30шт.)        |-0.1E1     |Полная мантисса                    |
|2.2|999999999999999999999999999999e99999(30шт.)|1е99999(30шт., после 20шт. запятая)             |0.1E0      |пр. работы с высокой степенью      |
|2.3|1е-30                                      |+.000000000000000000000000000001(1 на 30-м месте)|+0.1E-1    |проверка граничной степени точности|
|2.4|1e-99990                                   |100000000                                        |+0.1E-99999|граничное значение степени         |
|2.2|999999999999999999999999999999e99999(30шт.)|2                                                |0.5E30      |пр.  правильного округления последнего разряда      |

### Запредельные тесты

Тестовые ситуации, описанные в ТЗ (аварийные ситуации)

|№ |Пример ошибочного ввода            |Пояснение                      |
|--|-----------------------------------|-------------------------------|
|1 |+e895                              |Неверный формат                |
|2 |Sad                                |Неверный формат                |
|3 |er896                              |Неверный формат                |
|4 |895d65                             |Неверный формат                |
|5 |888888888888888888888888888(40 шт.)|Переполнение мантиссы          |
|6 |8952errr                           |Неверный формат                |
|7 |8955+e586                          |Неверный формат                |
|8 |-8924e+568856                      |Переполнение порядка ввода     |
|10|2.е-99999 5е-99999                 |Переполнение порядка результата|
|11|1.е0 0                             |Деление на ноль                |

## Выводы о проделанной работе

В целях изучения представления чисел в ПК была написана
программа для представления чисел, как массивов цифр,
деления этих чисел в виде массивов. Метод представления
"длинных" типов данных используется если данные нельзя
представить стандартными типами языка программирования.

## Ответы на вопросы

- Каков возможный диапазон чисел, представляемых в ПК?

Диапазон целых положительных чисел для n разрядного ПК: от 0
до 2n-1, где n – разрядность ПК (например, для 64х
разрядного ПК диапазон чисел от 0 до 264-1=18 446 744 073
709 551 615).

Для целых положительных и отрицательных: от - 2n-1 до 2n-1
-1 (например, на 64-х разрядном ПК диапазон от -9 223 372
036 854 775 808 до 9 223 372 036 854 775 807).

Диапазон действительных чисел: на 64х разрядном ПК от 3.6 E
–4951 до 1.1 E +4932.

- Какова возможная точность представления чисел, чем она
определяется?

На 64-х разрядной машине максимальное количество бит,
отводимых под мантиссу – 52 бита, а значит, максимально
возможная точность 2^-52, т.е. ±2.2-16.

- Какие стандартные операции возможны над числами?

Стандартными операциями над числами являются сложение,
вычитание, умножение и деление чисел.

- Какой тип данных может выбрать программист, если
обрабатываемые числа превышают возможный диапазон
представления чисел в ПК?

В данном случае можно разбить число на числа/символы,
которые удовлетворяли бы диапазону представления чисел в ПК,
и хранить их в массиве.

- Как можно осуществить операции над числами, выходящими за
рамки машинного представления?

Можно разбить числа на цифры и производить уже вычисления с
массивами цифр, или же можно разбивать числа на разные
составляющие другого типа, которые не выходили бы за рамки
машинного представления.
